var Webflow=Webflow||[];Webflow.push(function(){$.fn.sfind=function(t){return this.find(t).addBack(t)},$.fn.stoggle=function(t){return this.toggleClass("hidden",!t)},$.fn.float=function(t,e,n=-1/0,i=1/0){let r=this.attr(t),l=parseFloat(r);return isNaN(l)||l<n||l>i?e:l},$.fn.integer=function(...t){return Math.round(this.float(...t))},$.fn.boolean=function(t,e){let n=this.attr(t);return"true"==n||"false"!=n&&e},$.fn.string=function(t,e,n=[]){let i=this.attr(t);return i&&(!n||n.includes(i))?i:e},$.fn.$relatives=function(t){return"itself"==t?this:"parent"==t?this.parent():"itself_parent"==t?this.parent().addBack():"children"==t?this.children():"itself_children"==t?this.children().addBack():"descendants"==t?this.find("*"):"itself_descendants"==t?this.find("*").addBack():$()},$.fn.flaggables=function(){return this.string("filter-flag","itself",["itself","parent","itself_parent","children","itself_children","descendants","itself_descendants"])},$.fn.$flaggables=function(){return this.$relatives(this.flaggables())},$.fn.$=function(t,e){return this.sfind(`[filter-${t}="${e}"]`)},$.fn.$element=function(t){return this.$("element",t)},$.fn.$info=function(t){return this.$("info",t)},$.fn.$button=function(t){return this.$("button",t)},$.fn.$template=function(t){return this.$("template",t)},$.fn.$text=function(t){return this.$("text",t)},$.fn.template=function(){let t=this,e=this.parent();function n(){e.empty()}return n(),{clear:n,push:function n(){return t.map(function(t){let n=$(this).clone(!0);return e.eq(t).append(n),n.get(0)})}}},$.fn.adder=function(t){let e=this.attr(t);if(!e)return null;let n=e.split(",").map(function(t){t=t.trim();let e="all"==t;if(e)return{max:e};let n="g"==t[0],i="="==t[0],r="x"==t[0];return(t=parseInt(t=n||i||r?t.slice(1):t),isNaN(t))?null:{multiplier:r,value:t,max:e,goto:n,setter:i}}).filter(t=>null!=t);if(!n.length)return null;let i=-1;return{next:function e(r,l=1/0){i=Math.min(i+1,n.length-1);let a=0;for(;n[i].goto;)if(i=Math.max(0,Math.min(n[i].value,l)),a++>10)throw Error(`Too many iterations with goto in aadder from attribute "${t}"`);let o=n[i];return o.max?l:(o.setter?r=o.value:o.multiplier?r*=o.value:r+=o.value,Math.min(r,l))}}};let t=["OR","AND","NOR","NAND","XOR","XNOR"],e=window.filters={};$("[filter-list]").each(function(){let n=$(this),i=n.attr("filter-list"),r=e[i]={name:i,state:!1};function l(t){r.pageLength=t,r.update()}let a=$(`[filter-ctx=${i}]`),o=a.$template("bubble").template(),s=a.$template("page").template(),u=n.children();r.method=n.string("filter-method","remove",["remove","hide"]),r.pageLength=n.integer("filter-paginate",1/0,1),r.paginate=r.pageLength<1/0,r.currentPage=0,r.loop=n.boolean("filter-loop",!1),r.operator=n.string("filter-operator","OR",t),r.scroll=n.adder("filter-scroll");let f=r.scroll;r.scroll=Boolean(f);let c;r.scroll&&(c=new IntersectionObserver(function(t){if(t[0].intersectionRatio<=0)return;let e=f.next(r.pageLength,r.itemCount);l(e)},{threshold:[0,.25,.5,.75,1]})),r.more=a.sfind("[filter-more]").each(function(){let t=$(this),e=t.adder("filter-more");e&&t.click(function(){let t=e.next(r.pageLength,r.itemCount);l(t)})}),r.goto=function(t){if(r.loop)t=(t%r.pageCount+r.pageCount)%r.pageCount;else if(t<0||t>=r.pageCount)return;r.currentPage=t,r.update()},r.previous=function(){r.goto(r.currentPage-1)},r.next=function(){r.goto(r.currentPage+1)},a.$button("previous").click(function(){r.previous()}),a.$button("next").click(function(){r.next()});let g={};function p(t){let e="filter-condition";t&&(e+="-"+t.toLowerCase()),a.sfind("["+e+"]").each(function(){let n=$(this),i=n.attr(e);if(!i)return;let r=i.split(",");if(!t&&r.length>1)return;let l=r.map(function(t){t=t.trim();let e="!"==t[0],n=e?t.slice(1):t;return g.hasOwnProperty(n)?Boolean(g[n]^e):null}).filter(t=>null!=t);n.stoggle(t?applyOperator(t,l):l[0])})}let h=0;r.update=function(){if(h>0)return--h;n.empty(),r.itemCount=u.length;let t=Object.values(r.groups);for(let e of t){let i=e.items.some(t=>t.state);i!=e.state&&(e.state=i),g[e.name]=i}let l=t.some(t=>t.state);function f(t,e){switch(t){case"OR":return e.includes(!0);case"AND":return e.every(t=>t);case"XOR":return e.filter(t=>t).length%2==1;case"NOR":return!e.includes(!0);case"NAND":return e.some(t=>!t);case"XNOR":return e.filter(t=>t).length%2==0;default:throw TypeError(`Invalid operator "${t}" (filter "${r.name}")`)}}l!=r.state&&(r.state=l);let d=u.filter(function(){let e=$(this),n=t.filter(t=>t.state);if(!n.length)return!0;let i=n.map(function(t){let n=t.items.filter(t=>t.state);if(!n.length)return!0;let i=n.map(function(n){let i=n.getValue(),r=t.target?e.find(t.target):e,l=r.text(),a=l.includes(i);return a});return f(t.operator,i)});return f(r.operator,i)});r.pageCount=Math.max(1,Math.ceil(d.length/r.pageLength)),r.currentPage=Math.min(Math.max(0,r.currentPage),r.pageCount-1);let m=r.currentPage*r.pageLength,b=m+r.pageLength,v=d.slice(m,b);function x(t,e,n){e=e.toString(),n=n.toString(),t.each(function(){let t=$(this),i=t.boolean("filter-pad",!1),r=e;i&&(r=r.padStart(n.length,"0")),t.text(r)})}function _(t,e,n){x(a.$info(t),e,n)}function C(t){t.each(function(){let t=$(this),e=t.data("defaultText");e?t.text(e):t.data("defaultText",t.text())})}function k(t,e){t.each(function(){let t=$(this),n=t.string("filter-format","none",["none","sentence_case","title_case","lowercase","uppercase","kebab_case","snake_case"]);switch(e=e.trim(),n){case"sentence_case":{let i=e.split(/\s+/);i.length&&(i[0]=i[0][0].toUpperCase()+i[0].slice(1)),e=i.join(" ");break}case"title_case":{let r=e.split(/\s+/);for(let l=0;l<r.length;++l)r[l]=r[l][0].toUpperCase()+r[l].slice(1);e=r.join(" ");break}case"lowercase":e=e.toLowerCase();break;case"uppercase":e=e.toUpperCase();break;case"kebab_case":e=e.replace(/\s+/g,"-");break;case"snake_case":e=e.replace(/\s+/g,"_")}t.text(e)})}function w(t,e){x(a.$info(t),value,maxValue)}for(let y of(a.$info("total_count").text(r.itemCount),a.$info("page_length").text(r.pageLength),_("filtered_count",d.length,r.itemCount),_("shown_count",v.length,r.paginate?r.pageLength:r.itemCount),a.$info("page_count").text(r.pageCount),_("current_page",r.currentPage+1,r.pageCount),Object.values(r.groups))){let O=a.$info(y.name);for(let L of(C(O),y.items))if(L.state){k(O,L.getValue());break}}for(let N of(g.paginate=r.pageCount>1,g.filter=r.state,o.clear(),Object.values(r.groups)))for(let R of N.items)if(R.state){let P=o.push();P.$flaggables().toggleClass(N.name,!0),P.$text("value").text(R.getValue()),P.$button("toggle").click(function(){R.toggle()})}s.clear();for(let A=0;A<r.pageCount;++A){let V=s.push();x(V.$text("index"),A+1,r.pageCount),V.$flaggables().toggleClass("filter-current",A==r.currentPage),V.click(function(){r.goto(A)})}p(),p("OR"),p("AND"),p("NOR"),p("NAND"),p("XOR"),p("XNOR"),n.empty(),n.append(v),r.scroll&&v.last().length&&(c._lastObserved&&c.unobserve(c._lastObserved),c.observe(v.last().get(0)),c._lastObserved=v.last().get(0))},r.groups={},a.sfind("[filter-group]").each(function(){let e=$(this),n=e.attr("filter-group"),i=r.groups[n]={name:n,state:!1},l=i.actives=[];i.unique=e.boolean("filter-multi",!1),i.unique?i.maxActiveCount=1:i.maxActiveCount=e.integer("filter-max-active-count",1/0,1),i.flaggables=e.flaggables(),i.target=e.string("filter-target"),i.type=e.string("filter-type","button",["button","buttons","search","checkbox","select"]),i.inverse=e.boolean("filter-inverse",!1),i.operator=e.string("filter-operator","OR",t),i.reset=function(t){for(let e of i.items)e.index!=t&&e.off()},i.$items=function t(l){if("button"==l)return e;if("buttons"==l)return e.children();if("search"==l)return e.sfind('input[type="text"]');if("checkbox"==l)return e.sfind('input[type="checkbox"]');if("select"==i.type)return e.sfind("select");throw TypeError(`Invalid type for group "${n}" (filter "${r.name}")`)}(i.type),i.$items.closest("form").submit(t=>!1);let a=i.items=[];i.$items.each(function(t){let e=$(this),n={index:t,active:!1};n.inverted=e.boolean("filter-inverted",!1),n.state=n.inverted;let o=e.$relatives(i.flaggables);function s(t){"checkbox"==i.type&&(o.prop("checked",t),void 0!==Webflow&&e.prev().toggleClass("w--redirected-checked",t)),t||"search"!=i.type&&"select"!=i.type||e.val(""),o.toggleClass("filter-active",t)}if(n.getValue=function(){return e.attr("filter-value")?e.attr("filter-value").toLowerCase():"search"==i.type?e.val().toLowerCase():"checkbox"==i.type&&void 0!==Webflow?e.next().prop("innerText").toLowerCase():"select"==i.type?e.val():e.prop("innerText").toLowerCase()},n.on=function(){if(n.active)return s(!1);let e=n.getValue();if(!e)return s(!1);n.active=!0,n.state=n.active^n.inverted,l.push(t),l.length>i.maxActiveCount&&(h+=1,olderActiveIndex=l[0],i.items[olderActiveIndex].off()),s(!0),r.update()},n.off=function(){if(!n.active||"select"==i.type&&!e.find('option[value=""]').length)return;n.active=!1,n.state=n.active^n.inverted;let a=l.indexOf(t);l.splice(a,1),s(!1),r.update()},n.toggle=function(){n.active?n.off():n.on()},"button"==i.type||"buttons"==i.type)e.on("click",function(){n.toggle()});else if("search"==i.type){var u;let f;e.on("input",(u=function(){let t=n.getValue();Boolean(t)!=n.state?n.getValue()?n.on():n.off():r.update()},function(...t){clearTimeout(f),f=setTimeout(()=>u.call(this,...t),300)})),h+=1,e.trigger("input")}else"checkbox"==i.type?(e.on("input",function(){n.toggle()}),e.prop("checked")&&(h+=1,e.trigger("input"))):"select"==i.type&&(e.on("change",function(){let t=n.getValue();Boolean(t)!=n.state?n.getValue()?n.on():n.off():r.update()}),h+=1,e.trigger("change"));a.push(n)})}),r.update(),n.is(".w-dyn-items")&&async function(){let t=n.parent(),e=t.find(".w-pagination-next").prop("href");for(g.loading=Boolean(e);g.loading;){let l=await fetch(e),a=await l.text(),o=new DOMParser().parseFromString(a,"text/html"),s=$(o),f=s.find(`[filter-list="${i}"]`),c=f.children().detach();u.push(...c),e=f.parent().find(".w-pagination-next").prop("href"),g.loading=Boolean(e),r.update()}}()})});
